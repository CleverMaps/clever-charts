<!DOCTYPE html>
<meta charset="utf-8">

<head>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/4.8.0/d3.min.js"></script>
    <script src="dist/histogram-1.0.0.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"/>
</head>

<body>
    <div class="graphs-ct"></div>
    <script>
        // docs: https://github.com/d3/d3-format
        // all locales: https://unpkg.com/d3-format@1.2.0/locale/
        // set cs-CZ locale by default
        d3.formatDefaultLocale({
            "decimal": ",",
            "thousands": " ",
            "grouping": [
                3
            ],
            "currency": [
                "",
                " Kč"
            ]
        });

        // histogram 1 (default selection) ================================================================
        var histogram = new Histogram({
            width:360,
            height:150,
            inactiveBarColor:"#f0f0f0",
            overSelectionColor:"#ffea00"
        });

        histogram.render(".graphs-ct");

        d3.json("data/pocet_objednavek.json", (json) => {
            histogram.setData(json.content);  
        });

        histogram.on("selectionOver", (selectionIndex)=>{
            console.log("histogram 1: selectionOver:"+selectionIndex);
        });

        histogram.on("toggleSelection", (selectionIndex, enabled)=>{
            console.log("histogram 1: toggleSelection:"+selectionIndex+", enabled:"+enabled);
        });

        histogram.on("selectionChanged", (selection)=>{
            console.log("histogram 1: selectionChanged:"+JSON.stringify(selection, null, 4));
        });

        // histogram 2 (filter) ==================================================================================
        var histogram2 = new Histogram({
            width:360,
            enableSelectionToggle:false,
            height:150,
            inactiveBarColor:"#f0f0f0",
            overSelectionColor:"#ffea00"
        });

        histogram2.render(".graphs-ct");

        d3.json("data/sample.json", (json) => {
            histogram2.setData(json.content, [{
                from:100,
                to:300
            }]);
        });

        histogram2.on("selectionOver", (selectionIndex)=>{
            console.log("histogram 2: selectionOver:"+selectionIndex);
        });

        histogram2.on("toggleSelection", (selectionIndex, enabled)=>{
            console.log("histogram 2: toggleSelection:"+selectionIndex+", enabled:"+enabled);
        });        

        // histogram 3 (inverted filter) ===================================================================================
        var histogram3 = new Histogram({
            width:360,
            enableSelectionToggle:false,
            height:150,
            inactiveBarColor:"#f0f0f0",
            overSelectionColor:"#ffea00"
        });

        histogram3.render(".graphs-ct");

        d3.json("data/sample.json", (json) => {
            histogram3.setData(json.content, [
                {
                    from:100,
                    invert:true,
                    to:300
                }
            ]);
        });

        histogram3.on("selectionOver", (selectionIndex)=>{
            console.log("histogram 3: selectionOver:"+selectionIndex);
        });

        histogram3.on("toggleSelection", (selectionIndex, enabled)=>{
            console.log("histogram 3: toggleSelection:"+selectionIndex+", enabled:"+enabled);
        });          
    </script>
</body>